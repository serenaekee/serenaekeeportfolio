<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- FONT AWESOME -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- HOME ABOUT PAGE CSS -->
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/responsive.css">
    <title>Serenaekee Portfolio Website</title>
</head>
<body>
<!-- HEADER -->
<header class="header">
    <a href="#" class="logo" onclick='setIframeSrc("about.html", "About Me")'>SERENA</a>
    <i class="fa-solid fa-bars" id="menu-icon"></i>
    <nav class="navbar">
        <div class="menu-container">
            <a onclick='setIframeSrc("about.html", "About Me")'>ABOUT</a>
            <a onclick='setIframeSrc("education.html", "My Education Background")'>EDUCATION</a>
            <a onclick='setIframeSrc("experience.html", "My Working Experience")'>EXPERIENCE</a>
            <a onclick='setIframeSrc("licenses.html", "Licenses & Certifications")'>LICENSES & CERTIFICATIONS</a>
            <a onclick='setIframeSrc("honours.html", "Honours, Awards & Activities")'>HONOURS</a>
            <a onclick='setIframeSrc("projects.html", "My Projects")'>PROJECTS</a>
    </nav>
</header>

<!-- HOME SECTION -->
<section class="home" id="home">
    <div class="home-img">
        <img src="resource/img/TeeEeKee.png" alt="">
    </div>
    <div class="home-content">
        <h3>Hi Myself</h3>
        <h1>Tee Ee Kee</h1>
        <h3>And I'm a <span class="animated-word" id="animated-word">Fresh Graduate in Computer Science</span></h3>
        <p>Bachelor Degree of Computer Science (Web Technology) with Honours @ Universiti Tun Hussein Onn Malaysia (UTHM) </p>
        <div class="social-media">
            <!--<a href="#"><i class="fa-brands fa-facebook"></i></a>-->
            <a href="https://www.linkedin.com/in/tee-ee-kee-753417201/" target="_blank"><i class="fa-brands fa-linkedin-in"></i></a>
            <a href="https://github.com/serenaekee" target="_blank"><i class="fa-brands fa-github"></i></a>
            <a href="mailto:eekee00@gmail.com"><i class="fa-regular fa-envelope"></i></a>
        </div>
        <a href="resource/resume/resume.pdf" target="_blank" class="btn">Download CV</a>
    </div>
</section>

<!-- CONTENT SECTION -->
<iframe src="about.html" class="iframe-content" id="iframe-content" scrolling="no" onload="adjustIframeHeight(this)"></iframe>

<!-- FOOTER SECTION -->
<footer class="footer">
    <div class="footer-text">
        <p>Copyright &copy; 2024 by Tee Ee Kee | All Right Reserved.</p>
    </div>
</footer>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="scripts/main.js"></script>
<script>
/*********************Load the html file and display between header and footer***************************/
var iframe = document.getElementById("iframe-content");

var previousWidth = window.innerWidth;

if(true) {
    // Function to set the iframe souce, scroll to top & store the active tag in sessionStorage
    function setIframeSrc(src, newText) {
        iframe.src = src;
        iframe.contentWindow.scrollTo(0,0);
        window.scrollTo(0,0);
        sessionStorage.setItem("activeTag", src);
        window.location.reload(); // Refresh the parent page
        refreshIframe(); 
    }

    // Function to set the active class on corresponding link
    function setActiveLink(activeTag) {
        var links = document.querySelectorAll("nav .menu-container a");
        links.forEach(function(link) {
            if (link.getAttribute("onclick".includes(activeTag))) {
                link.classList.add("active");
            } else {
                link.classList.remove("active");
            }
        });
    }

    function refreshIframe() {
        iframe.contentWindow.location.reload();
    }

    iframe.onload = function() {
        iframe.style.height = iframe.contentWindow.document.body.scrollHeight + 50 + "px";
    }

    // Retrieve the active tag from sessionStorage
    var activeTag = sessionStorage.getItem("activeTag");

    if (activeTag) {
        // Set iframe souce to corresponding page
        iframe.src = activeTag;

        setActiveLink(activeTag);
    }

    // Add event listener to save active tag before refreshing
    window.addEventListener("beforeunload", function() {
        sessionStorage.setItem("activeTag", iframe.src);
    });

    // Add event listener to check for window resize & refresh iframe if width changes
    window.addEventListener("resize", function() {
        var currentWidth = window.innerWidth;
        if (currentWidth !== previousWidth) {
            refreshIframe();
            previousWidth = currentWidth;
        }
    });
}

function adjustIframeHeight(iframe) {
    // Retrieve iframe's content window
    var iframeWindow = iframe.contentWindow || iframe.contentDocument.defaultView;

    //Set iframe's height to the height of its content
    if (iframeWindow.document.body) {
        iframe.style.height = iframeWindow.document.documentElement.scrollHeight + 'px';
    }
}

// Listen for messages from the iframe
window.addEventListener('message', function(event) {
    if (event.data && event.data.height) {
        var iframe = document.getElementById('iframe-content');
        iframe.style.height = event.data.height + 'px';
    }
});

/*************Function to animate the text****************/
function animateText(element) {
        var text = element.innerText;
        var length = text.length;
        var counter = 0;
        var isAppearing = true;

        setInterval(function() {
            if (isAppearing) {
                if (counter < length) {
                    element.innerText = text.slice(0, counter + 1);
                    counter++;
                } else {
                    isAppearing = false;
                }
            } else {
                if (counter > 0) {
                    element.innerText = text.slice(0, counter - 1);
                    counter--;
                } else {
                    isAppearing = true;
                }
            }
        }, 100);
    }

// Call the function with the desired element
animateText(document.getElementById('animated-word'));
</script>
</body>
</html>
